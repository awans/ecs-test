{
  "version": "tree-0.1",
  "tree": {
    "id": "App",
    "path": "",
    "children": {
      "Tree": {
        "id": "Tree",
        "path": "Tree"
      },
      "ecs-stack": {
        "id": "ecs-stack",
        "path": "ecs-stack",
        "children": {
          "prod": {
            "id": "prod",
            "path": "ecs-stack/prod",
            "children": {
              "VPC": {
                "id": "VPC",
                "path": "ecs-stack/prod/VPC",
                "children": {
                  "Resource": {
                    "id": "Resource",
                    "path": "ecs-stack/prod/VPC/Resource",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::VPC",
                      "aws:cdk:cloudformation:props": {
                        "cidrBlock": "10.0.0.0/21",
                        "enableDnsHostnames": true,
                        "enableDnsSupport": true,
                        "instanceTenancy": "default",
                        "tags": [
                          {
                            "key": "Name",
                            "value": "ecs-stack/prod/VPC"
                          }
                        ]
                      }
                    }
                  },
                  "PublicSubnet1": {
                    "id": "PublicSubnet1",
                    "path": "ecs-stack/prod/VPC/PublicSubnet1",
                    "children": {
                      "Subnet": {
                        "id": "Subnet",
                        "path": "ecs-stack/prod/VPC/PublicSubnet1/Subnet",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::Subnet",
                          "aws:cdk:cloudformation:props": {
                            "cidrBlock": "10.0.0.0/23",
                            "vpcId": {
                              "Ref": "prodVPC05D050A5"
                            },
                            "availabilityZone": {
                              "Fn::Select": [
                                0,
                                {
                                  "Fn::GetAZs": ""
                                }
                              ]
                            },
                            "mapPublicIpOnLaunch": true,
                            "tags": [
                              {
                                "key": "Name",
                                "value": "ecs-stack/prod/VPC/PublicSubnet1"
                              },
                              {
                                "key": "aws-cdk:subnet-name",
                                "value": "Public"
                              },
                              {
                                "key": "aws-cdk:subnet-type",
                                "value": "Public"
                              }
                            ]
                          }
                        }
                      },
                      "Acl": {
                        "id": "Acl",
                        "path": "ecs-stack/prod/VPC/PublicSubnet1/Acl"
                      },
                      "RouteTable": {
                        "id": "RouteTable",
                        "path": "ecs-stack/prod/VPC/PublicSubnet1/RouteTable",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::RouteTable",
                          "aws:cdk:cloudformation:props": {
                            "vpcId": {
                              "Ref": "prodVPC05D050A5"
                            },
                            "tags": [
                              {
                                "key": "Name",
                                "value": "ecs-stack/prod/VPC/PublicSubnet1"
                              }
                            ]
                          }
                        }
                      },
                      "RouteTableAssociation": {
                        "id": "RouteTableAssociation",
                        "path": "ecs-stack/prod/VPC/PublicSubnet1/RouteTableAssociation",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::SubnetRouteTableAssociation",
                          "aws:cdk:cloudformation:props": {
                            "routeTableId": {
                              "Ref": "prodVPCPublicSubnet1RouteTable44708A45"
                            },
                            "subnetId": {
                              "Ref": "prodVPCPublicSubnet1SubnetBD79F0E4"
                            }
                          }
                        }
                      },
                      "DefaultRoute": {
                        "id": "DefaultRoute",
                        "path": "ecs-stack/prod/VPC/PublicSubnet1/DefaultRoute",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::Route",
                          "aws:cdk:cloudformation:props": {
                            "routeTableId": {
                              "Ref": "prodVPCPublicSubnet1RouteTable44708A45"
                            },
                            "destinationCidrBlock": "0.0.0.0/0",
                            "gatewayId": {
                              "Ref": "prodVPCIGW0B427BB6"
                            }
                          }
                        }
                      },
                      "EIP": {
                        "id": "EIP",
                        "path": "ecs-stack/prod/VPC/PublicSubnet1/EIP",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::EIP",
                          "aws:cdk:cloudformation:props": {
                            "domain": "vpc",
                            "tags": [
                              {
                                "key": "Name",
                                "value": "ecs-stack/prod/VPC/PublicSubnet1"
                              }
                            ]
                          }
                        }
                      },
                      "NATGateway": {
                        "id": "NATGateway",
                        "path": "ecs-stack/prod/VPC/PublicSubnet1/NATGateway",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::NatGateway",
                          "aws:cdk:cloudformation:props": {
                            "allocationId": {
                              "Fn::GetAtt": [
                                "prodVPCPublicSubnet1EIPE7EB2C15",
                                "AllocationId"
                              ]
                            },
                            "subnetId": {
                              "Ref": "prodVPCPublicSubnet1SubnetBD79F0E4"
                            },
                            "tags": [
                              {
                                "key": "Name",
                                "value": "ecs-stack/prod/VPC/PublicSubnet1"
                              }
                            ]
                          }
                        }
                      }
                    }
                  },
                  "PublicSubnet2": {
                    "id": "PublicSubnet2",
                    "path": "ecs-stack/prod/VPC/PublicSubnet2",
                    "children": {
                      "Subnet": {
                        "id": "Subnet",
                        "path": "ecs-stack/prod/VPC/PublicSubnet2/Subnet",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::Subnet",
                          "aws:cdk:cloudformation:props": {
                            "cidrBlock": "10.0.2.0/23",
                            "vpcId": {
                              "Ref": "prodVPC05D050A5"
                            },
                            "availabilityZone": {
                              "Fn::Select": [
                                1,
                                {
                                  "Fn::GetAZs": ""
                                }
                              ]
                            },
                            "mapPublicIpOnLaunch": true,
                            "tags": [
                              {
                                "key": "Name",
                                "value": "ecs-stack/prod/VPC/PublicSubnet2"
                              },
                              {
                                "key": "aws-cdk:subnet-name",
                                "value": "Public"
                              },
                              {
                                "key": "aws-cdk:subnet-type",
                                "value": "Public"
                              }
                            ]
                          }
                        }
                      },
                      "Acl": {
                        "id": "Acl",
                        "path": "ecs-stack/prod/VPC/PublicSubnet2/Acl"
                      },
                      "RouteTable": {
                        "id": "RouteTable",
                        "path": "ecs-stack/prod/VPC/PublicSubnet2/RouteTable",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::RouteTable",
                          "aws:cdk:cloudformation:props": {
                            "vpcId": {
                              "Ref": "prodVPC05D050A5"
                            },
                            "tags": [
                              {
                                "key": "Name",
                                "value": "ecs-stack/prod/VPC/PublicSubnet2"
                              }
                            ]
                          }
                        }
                      },
                      "RouteTableAssociation": {
                        "id": "RouteTableAssociation",
                        "path": "ecs-stack/prod/VPC/PublicSubnet2/RouteTableAssociation",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::SubnetRouteTableAssociation",
                          "aws:cdk:cloudformation:props": {
                            "routeTableId": {
                              "Ref": "prodVPCPublicSubnet2RouteTableFE407696"
                            },
                            "subnetId": {
                              "Ref": "prodVPCPublicSubnet2SubnetBD0F8E17"
                            }
                          }
                        }
                      },
                      "DefaultRoute": {
                        "id": "DefaultRoute",
                        "path": "ecs-stack/prod/VPC/PublicSubnet2/DefaultRoute",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::Route",
                          "aws:cdk:cloudformation:props": {
                            "routeTableId": {
                              "Ref": "prodVPCPublicSubnet2RouteTableFE407696"
                            },
                            "destinationCidrBlock": "0.0.0.0/0",
                            "gatewayId": {
                              "Ref": "prodVPCIGW0B427BB6"
                            }
                          }
                        }
                      },
                      "EIP": {
                        "id": "EIP",
                        "path": "ecs-stack/prod/VPC/PublicSubnet2/EIP",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::EIP",
                          "aws:cdk:cloudformation:props": {
                            "domain": "vpc",
                            "tags": [
                              {
                                "key": "Name",
                                "value": "ecs-stack/prod/VPC/PublicSubnet2"
                              }
                            ]
                          }
                        }
                      },
                      "NATGateway": {
                        "id": "NATGateway",
                        "path": "ecs-stack/prod/VPC/PublicSubnet2/NATGateway",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::NatGateway",
                          "aws:cdk:cloudformation:props": {
                            "allocationId": {
                              "Fn::GetAtt": [
                                "prodVPCPublicSubnet2EIPB7299D42",
                                "AllocationId"
                              ]
                            },
                            "subnetId": {
                              "Ref": "prodVPCPublicSubnet2SubnetBD0F8E17"
                            },
                            "tags": [
                              {
                                "key": "Name",
                                "value": "ecs-stack/prod/VPC/PublicSubnet2"
                              }
                            ]
                          }
                        }
                      }
                    }
                  },
                  "PrivateSubnet1": {
                    "id": "PrivateSubnet1",
                    "path": "ecs-stack/prod/VPC/PrivateSubnet1",
                    "children": {
                      "Subnet": {
                        "id": "Subnet",
                        "path": "ecs-stack/prod/VPC/PrivateSubnet1/Subnet",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::Subnet",
                          "aws:cdk:cloudformation:props": {
                            "cidrBlock": "10.0.4.0/23",
                            "vpcId": {
                              "Ref": "prodVPC05D050A5"
                            },
                            "availabilityZone": {
                              "Fn::Select": [
                                0,
                                {
                                  "Fn::GetAZs": ""
                                }
                              ]
                            },
                            "mapPublicIpOnLaunch": false,
                            "tags": [
                              {
                                "key": "Name",
                                "value": "ecs-stack/prod/VPC/PrivateSubnet1"
                              },
                              {
                                "key": "aws-cdk:subnet-name",
                                "value": "Private"
                              },
                              {
                                "key": "aws-cdk:subnet-type",
                                "value": "Private"
                              }
                            ]
                          }
                        }
                      },
                      "Acl": {
                        "id": "Acl",
                        "path": "ecs-stack/prod/VPC/PrivateSubnet1/Acl"
                      },
                      "RouteTable": {
                        "id": "RouteTable",
                        "path": "ecs-stack/prod/VPC/PrivateSubnet1/RouteTable",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::RouteTable",
                          "aws:cdk:cloudformation:props": {
                            "vpcId": {
                              "Ref": "prodVPC05D050A5"
                            },
                            "tags": [
                              {
                                "key": "Name",
                                "value": "ecs-stack/prod/VPC/PrivateSubnet1"
                              }
                            ]
                          }
                        }
                      },
                      "RouteTableAssociation": {
                        "id": "RouteTableAssociation",
                        "path": "ecs-stack/prod/VPC/PrivateSubnet1/RouteTableAssociation",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::SubnetRouteTableAssociation",
                          "aws:cdk:cloudformation:props": {
                            "routeTableId": {
                              "Ref": "prodVPCPrivateSubnet1RouteTableB86A28E0"
                            },
                            "subnetId": {
                              "Ref": "prodVPCPrivateSubnet1Subnet6794AAA7"
                            }
                          }
                        }
                      },
                      "DefaultRoute": {
                        "id": "DefaultRoute",
                        "path": "ecs-stack/prod/VPC/PrivateSubnet1/DefaultRoute",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::Route",
                          "aws:cdk:cloudformation:props": {
                            "routeTableId": {
                              "Ref": "prodVPCPrivateSubnet1RouteTableB86A28E0"
                            },
                            "destinationCidrBlock": "0.0.0.0/0",
                            "natGatewayId": {
                              "Ref": "prodVPCPublicSubnet1NATGateway3F669DFC"
                            }
                          }
                        }
                      }
                    }
                  },
                  "PrivateSubnet2": {
                    "id": "PrivateSubnet2",
                    "path": "ecs-stack/prod/VPC/PrivateSubnet2",
                    "children": {
                      "Subnet": {
                        "id": "Subnet",
                        "path": "ecs-stack/prod/VPC/PrivateSubnet2/Subnet",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::Subnet",
                          "aws:cdk:cloudformation:props": {
                            "cidrBlock": "10.0.6.0/23",
                            "vpcId": {
                              "Ref": "prodVPC05D050A5"
                            },
                            "availabilityZone": {
                              "Fn::Select": [
                                1,
                                {
                                  "Fn::GetAZs": ""
                                }
                              ]
                            },
                            "mapPublicIpOnLaunch": false,
                            "tags": [
                              {
                                "key": "Name",
                                "value": "ecs-stack/prod/VPC/PrivateSubnet2"
                              },
                              {
                                "key": "aws-cdk:subnet-name",
                                "value": "Private"
                              },
                              {
                                "key": "aws-cdk:subnet-type",
                                "value": "Private"
                              }
                            ]
                          }
                        }
                      },
                      "Acl": {
                        "id": "Acl",
                        "path": "ecs-stack/prod/VPC/PrivateSubnet2/Acl"
                      },
                      "RouteTable": {
                        "id": "RouteTable",
                        "path": "ecs-stack/prod/VPC/PrivateSubnet2/RouteTable",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::RouteTable",
                          "aws:cdk:cloudformation:props": {
                            "vpcId": {
                              "Ref": "prodVPC05D050A5"
                            },
                            "tags": [
                              {
                                "key": "Name",
                                "value": "ecs-stack/prod/VPC/PrivateSubnet2"
                              }
                            ]
                          }
                        }
                      },
                      "RouteTableAssociation": {
                        "id": "RouteTableAssociation",
                        "path": "ecs-stack/prod/VPC/PrivateSubnet2/RouteTableAssociation",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::SubnetRouteTableAssociation",
                          "aws:cdk:cloudformation:props": {
                            "routeTableId": {
                              "Ref": "prodVPCPrivateSubnet2RouteTableCDBE868D"
                            },
                            "subnetId": {
                              "Ref": "prodVPCPrivateSubnet2Subnet04B92CA7"
                            }
                          }
                        }
                      },
                      "DefaultRoute": {
                        "id": "DefaultRoute",
                        "path": "ecs-stack/prod/VPC/PrivateSubnet2/DefaultRoute",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::Route",
                          "aws:cdk:cloudformation:props": {
                            "routeTableId": {
                              "Ref": "prodVPCPrivateSubnet2RouteTableCDBE868D"
                            },
                            "destinationCidrBlock": "0.0.0.0/0",
                            "natGatewayId": {
                              "Ref": "prodVPCPublicSubnet2NATGatewayF40B99E5"
                            }
                          }
                        }
                      }
                    }
                  },
                  "IGW": {
                    "id": "IGW",
                    "path": "ecs-stack/prod/VPC/IGW",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::InternetGateway",
                      "aws:cdk:cloudformation:props": {
                        "tags": [
                          {
                            "key": "Name",
                            "value": "ecs-stack/prod/VPC"
                          }
                        ]
                      }
                    }
                  },
                  "VPCGW": {
                    "id": "VPCGW",
                    "path": "ecs-stack/prod/VPC/VPCGW",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::VPCGatewayAttachment",
                      "aws:cdk:cloudformation:props": {
                        "vpcId": {
                          "Ref": "prodVPC05D050A5"
                        },
                        "internetGatewayId": {
                          "Ref": "prodVPCIGW0B427BB6"
                        }
                      }
                    }
                  }
                }
              },
              "ALB": {
                "id": "ALB",
                "path": "ecs-stack/prod/ALB",
                "children": {
                  "Resource": {
                    "id": "Resource",
                    "path": "ecs-stack/prod/ALB/Resource",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::ElasticLoadBalancingV2::LoadBalancer",
                      "aws:cdk:cloudformation:props": {
                        "scheme": "internet-facing",
                        "securityGroups": [
                          {
                            "Fn::GetAtt": [
                              "prodALBSecurityGroup73EC3DD1",
                              "GroupId"
                            ]
                          }
                        ],
                        "subnets": [
                          {
                            "Ref": "prodVPCPublicSubnet1SubnetBD79F0E4"
                          },
                          {
                            "Ref": "prodVPCPublicSubnet2SubnetBD0F8E17"
                          }
                        ],
                        "type": "application"
                      }
                    }
                  },
                  "SecurityGroup": {
                    "id": "SecurityGroup",
                    "path": "ecs-stack/prod/ALB/SecurityGroup",
                    "children": {
                      "Resource": {
                        "id": "Resource",
                        "path": "ecs-stack/prod/ALB/SecurityGroup/Resource",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroup",
                          "aws:cdk:cloudformation:props": {
                            "groupDescription": "Automatically created Security Group for ELB ecsstackprodALB15656B4B",
                            "securityGroupIngress": [
                              {
                                "cidrIp": "0.0.0.0/0",
                                "ipProtocol": "tcp",
                                "fromPort": 80,
                                "toPort": 80,
                                "description": "Allow from anyone on port 80"
                              },
                              {
                                "cidrIp": "0.0.0.0/0",
                                "ipProtocol": "tcp",
                                "fromPort": 443,
                                "toPort": 443,
                                "description": "Allow from anyone on port 443"
                              }
                            ],
                            "vpcId": {
                              "Ref": "prodVPC05D050A5"
                            }
                          }
                        }
                      },
                      "to ecsstackprodFargateServiceSecurityGroup3F6B27D3:5000": {
                        "id": "to ecsstackprodFargateServiceSecurityGroup3F6B27D3:5000",
                        "path": "ecs-stack/prod/ALB/SecurityGroup/to ecsstackprodFargateServiceSecurityGroup3F6B27D3:5000",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroupEgress",
                          "aws:cdk:cloudformation:props": {
                            "groupId": {
                              "Fn::GetAtt": [
                                "prodALBSecurityGroup73EC3DD1",
                                "GroupId"
                              ]
                            },
                            "ipProtocol": "tcp",
                            "description": "Load balancer to target",
                            "destinationSecurityGroupId": {
                              "Fn::GetAtt": [
                                "prodFargateServiceSecurityGroup5FF63DF0",
                                "GroupId"
                              ]
                            },
                            "fromPort": 5000,
                            "toPort": 5000
                          }
                        }
                      }
                    }
                  },
                  "HTTPListener": {
                    "id": "HTTPListener",
                    "path": "ecs-stack/prod/ALB/HTTPListener",
                    "children": {
                      "Resource": {
                        "id": "Resource",
                        "path": "ecs-stack/prod/ALB/HTTPListener/Resource",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::ElasticLoadBalancingV2::Listener",
                          "aws:cdk:cloudformation:props": {
                            "defaultActions": [
                              {
                                "redirectConfig": {
                                  "protocol": "HTTPS",
                                  "statusCode": "HTTP_301"
                                },
                                "type": "redirect"
                              }
                            ],
                            "loadBalancerArn": {
                              "Ref": "prodALB6014B766"
                            },
                            "port": 80,
                            "protocol": "HTTP"
                          }
                        }
                      }
                    }
                  },
                  "HTTPSListener": {
                    "id": "HTTPSListener",
                    "path": "ecs-stack/prod/ALB/HTTPSListener",
                    "children": {
                      "Resource": {
                        "id": "Resource",
                        "path": "ecs-stack/prod/ALB/HTTPSListener/Resource",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::ElasticLoadBalancingV2::Listener",
                          "aws:cdk:cloudformation:props": {
                            "defaultActions": [
                              {
                                "targetGroupArn": {
                                  "Ref": "prodALBHTTPSListenerFargateServiceTargetGroup0990BEE5"
                                },
                                "type": "forward"
                              }
                            ],
                            "loadBalancerArn": {
                              "Ref": "prodALB6014B766"
                            },
                            "port": 443,
                            "protocol": "HTTPS",
                            "certificates": [
                              {
                                "certificateArn": "arn:aws:acm:us-west-1:312093006778:certificate/e00b73a0-f919-4ea0-a2d8-81f985331665"
                              }
                            ]
                          }
                        }
                      },
                      "FargateServiceTargetGroup": {
                        "id": "FargateServiceTargetGroup",
                        "path": "ecs-stack/prod/ALB/HTTPSListener/FargateServiceTargetGroup",
                        "children": {
                          "Resource": {
                            "id": "Resource",
                            "path": "ecs-stack/prod/ALB/HTTPSListener/FargateServiceTargetGroup/Resource",
                            "attributes": {
                              "aws:cdk:cloudformation:type": "AWS::ElasticLoadBalancingV2::TargetGroup",
                              "aws:cdk:cloudformation:props": {
                                "port": 5000,
                                "protocol": "HTTP",
                                "targetType": "ip",
                                "vpcId": {
                                  "Ref": "prodVPC05D050A5"
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              },
              "DB": {
                "id": "DB",
                "path": "ecs-stack/prod/DB",
                "children": {
                  "SubnetGroup": {
                    "id": "SubnetGroup",
                    "path": "ecs-stack/prod/DB/SubnetGroup",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::RDS::DBSubnetGroup",
                      "aws:cdk:cloudformation:props": {
                        "dbSubnetGroupDescription": "Subnet group for DB database",
                        "subnetIds": [
                          {
                            "Ref": "prodVPCPrivateSubnet1Subnet6794AAA7"
                          },
                          {
                            "Ref": "prodVPCPrivateSubnet2Subnet04B92CA7"
                          }
                        ]
                      }
                    }
                  },
                  "SecurityGroup": {
                    "id": "SecurityGroup",
                    "path": "ecs-stack/prod/DB/SecurityGroup",
                    "children": {
                      "Resource": {
                        "id": "Resource",
                        "path": "ecs-stack/prod/DB/SecurityGroup/Resource",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroup",
                          "aws:cdk:cloudformation:props": {
                            "groupDescription": "Security group for DB database",
                            "securityGroupEgress": [
                              {
                                "cidrIp": "0.0.0.0/0",
                                "description": "Allow all outbound traffic by default",
                                "ipProtocol": "-1"
                              }
                            ],
                            "vpcId": {
                              "Ref": "prodVPC05D050A5"
                            }
                          }
                        }
                      },
                      "from ecsstackprodFargateServiceSecurityGroup3F6B27D3:{IndirectPort}": {
                        "id": "from ecsstackprodFargateServiceSecurityGroup3F6B27D3:{IndirectPort}",
                        "path": "ecs-stack/prod/DB/SecurityGroup/from ecsstackprodFargateServiceSecurityGroup3F6B27D3:{IndirectPort}",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroupIngress",
                          "aws:cdk:cloudformation:props": {
                            "ipProtocol": "tcp",
                            "description": "from ecsstackprodFargateServiceSecurityGroup3F6B27D3:{IndirectPort}",
                            "fromPort": {
                              "Fn::GetAtt": [
                                "prodDB19DA47CF",
                                "Endpoint.Port"
                              ]
                            },
                            "groupId": {
                              "Fn::GetAtt": [
                                "prodDBSecurityGroup27027367",
                                "GroupId"
                              ]
                            },
                            "sourceSecurityGroupId": {
                              "Fn::GetAtt": [
                                "prodFargateServiceSecurityGroup5FF63DF0",
                                "GroupId"
                              ]
                            },
                            "toPort": {
                              "Fn::GetAtt": [
                                "prodDB19DA47CF",
                                "Endpoint.Port"
                              ]
                            }
                          }
                        }
                      }
                    }
                  },
                  "Secret": {
                    "id": "Secret",
                    "path": "ecs-stack/prod/DB/Secret",
                    "children": {
                      "Resource": {
                        "id": "Resource",
                        "path": "ecs-stack/prod/DB/Secret/Resource",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::SecretsManager::Secret",
                          "aws:cdk:cloudformation:props": {
                            "generateSecretString": {
                              "passwordLength": 30,
                              "secretStringTemplate": "{\"username\":\"postgres\"}",
                              "generateStringKey": "password",
                              "excludeCharacters": "\"@/\\"
                            }
                          }
                        }
                      },
                      "AttachedSecret": {
                        "id": "AttachedSecret",
                        "path": "ecs-stack/prod/DB/Secret/AttachedSecret",
                        "children": {
                          "Resource": {
                            "id": "Resource",
                            "path": "ecs-stack/prod/DB/Secret/AttachedSecret/Resource",
                            "attributes": {
                              "aws:cdk:cloudformation:type": "AWS::SecretsManager::SecretTargetAttachment",
                              "aws:cdk:cloudformation:props": {
                                "secretId": {
                                  "Ref": "prodDBSecretB63E7E14"
                                },
                                "targetId": {
                                  "Ref": "prodDB19DA47CF"
                                },
                                "targetType": "AWS::RDS::DBInstance"
                              }
                            }
                          }
                        }
                      }
                    }
                  },
                  "Resource": {
                    "id": "Resource",
                    "path": "ecs-stack/prod/DB/Resource",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::RDS::DBInstance",
                      "aws:cdk:cloudformation:props": {
                        "dbInstanceClass": "db.t2.small",
                        "allocatedStorage": "100",
                        "copyTagsToSnapshot": true,
                        "dbSubnetGroupName": {
                          "Ref": "prodDBSubnetGroup125E8662"
                        },
                        "deletionProtection": true,
                        "engine": "postgres",
                        "masterUsername": {
                          "Fn::Join": [
                            "",
                            [
                              "{{resolve:secretsmanager:",
                              {
                                "Ref": "prodDBSecretB63E7E14"
                              },
                              ":SecretString:username::}}"
                            ]
                          ]
                        },
                        "masterUserPassword": {
                          "Fn::Join": [
                            "",
                            [
                              "{{resolve:secretsmanager:",
                              {
                                "Ref": "prodDBSecretB63E7E14"
                              },
                              ":SecretString:password::}}"
                            ]
                          ]
                        },
                        "storageType": "gp2",
                        "vpcSecurityGroups": [
                          {
                            "Fn::GetAtt": [
                              "prodDBSecurityGroup27027367",
                              "GroupId"
                            ]
                          }
                        ]
                      }
                    }
                  }
                }
              },
              "Cluster": {
                "id": "Cluster",
                "path": "ecs-stack/prod/Cluster",
                "children": {
                  "Resource": {
                    "id": "Resource",
                    "path": "ecs-stack/prod/Cluster/Resource",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::ECS::Cluster",
                      "aws:cdk:cloudformation:props": {}
                    }
                  }
                }
              },
              "TaskDef": {
                "id": "TaskDef",
                "path": "ecs-stack/prod/TaskDef",
                "children": {
                  "TaskRole": {
                    "id": "TaskRole",
                    "path": "ecs-stack/prod/TaskDef/TaskRole",
                    "children": {
                      "Resource": {
                        "id": "Resource",
                        "path": "ecs-stack/prod/TaskDef/TaskRole/Resource",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::IAM::Role",
                          "aws:cdk:cloudformation:props": {
                            "assumeRolePolicyDocument": {
                              "Statement": [
                                {
                                  "Action": "sts:AssumeRole",
                                  "Effect": "Allow",
                                  "Principal": {
                                    "Service": "ecs-tasks.amazonaws.com"
                                  }
                                }
                              ],
                              "Version": "2012-10-17"
                            }
                          }
                        }
                      }
                    }
                  },
                  "Resource": {
                    "id": "Resource",
                    "path": "ecs-stack/prod/TaskDef/Resource",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::ECS::TaskDefinition",
                      "aws:cdk:cloudformation:props": {
                        "containerDefinitions": [
                          {
                            "essential": true,
                            "image": {
                              "Fn::Join": [
                                "",
                                [
                                  "312093006778.dkr.ecr.us-west-1.",
                                  {
                                    "Ref": "AWS::URLSuffix"
                                  },
                                  "/ecs-experiment:latest"
                                ]
                              ]
                            },
                            "name": "Web",
                            "portMappings": [
                              {
                                "containerPort": 5000,
                                "protocol": "tcp"
                              }
                            ],
                            "logConfiguration": {
                              "logDriver": "awslogs",
                              "options": {
                                "awslogs-group": {
                                  "Ref": "prodTaskDefWebLogGroup785DE79F"
                                },
                                "awslogs-stream-prefix": "prod-ECSCluster",
                                "awslogs-region": {
                                  "Ref": "AWS::Region"
                                }
                              }
                            },
                            "environment": [
                              {
                                "name": "STAGE",
                                "value": "prod"
                              },
                              {
                                "name": "DATABASE_URL",
                                "value": {
                                  "Fn::Join": [
                                    "",
                                    [
                                      {
                                        "Fn::GetAtt": [
                                          "prodDB19DA47CF",
                                          "Endpoint.Address"
                                        ]
                                      },
                                      ":",
                                      {
                                        "Fn::GetAtt": [
                                          "prodDB19DA47CF",
                                          "Endpoint.Port"
                                        ]
                                      }
                                    ]
                                  ]
                                }
                              },
                              {
                                "name": "DATABASE_USERNAME",
                                "value": "postgres"
                              }
                            ],
                            "secrets": [
                              {
                                "name": "DATABASE_PASSWORD",
                                "valueFrom": {
                                  "Ref": "prodDBSecretAttachedSecret5F9B37C3"
                                }
                              }
                            ]
                          }
                        ],
                        "cpu": "256",
                        "executionRoleArn": {
                          "Fn::GetAtt": [
                            "prodTaskDefExecutionRole257EB6D8",
                            "Arn"
                          ]
                        },
                        "family": "ecsstackprodTaskDef0A101E67",
                        "memory": "512",
                        "networkMode": "awsvpc",
                        "requiresCompatibilities": [
                          "FARGATE"
                        ],
                        "taskRoleArn": {
                          "Fn::GetAtt": [
                            "prodTaskDefTaskRole1294F326",
                            "Arn"
                          ]
                        }
                      }
                    }
                  },
                  "Web": {
                    "id": "Web",
                    "path": "ecs-stack/prod/TaskDef/Web",
                    "children": {
                      "LogGroup": {
                        "id": "LogGroup",
                        "path": "ecs-stack/prod/TaskDef/Web/LogGroup",
                        "children": {
                          "Resource": {
                            "id": "Resource",
                            "path": "ecs-stack/prod/TaskDef/Web/LogGroup/Resource",
                            "attributes": {
                              "aws:cdk:cloudformation:type": "AWS::Logs::LogGroup",
                              "aws:cdk:cloudformation:props": {}
                            }
                          }
                        }
                      }
                    }
                  },
                  "ExecutionRole": {
                    "id": "ExecutionRole",
                    "path": "ecs-stack/prod/TaskDef/ExecutionRole",
                    "children": {
                      "Resource": {
                        "id": "Resource",
                        "path": "ecs-stack/prod/TaskDef/ExecutionRole/Resource",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::IAM::Role",
                          "aws:cdk:cloudformation:props": {
                            "assumeRolePolicyDocument": {
                              "Statement": [
                                {
                                  "Action": "sts:AssumeRole",
                                  "Effect": "Allow",
                                  "Principal": {
                                    "Service": "ecs-tasks.amazonaws.com"
                                  }
                                }
                              ],
                              "Version": "2012-10-17"
                            }
                          }
                        }
                      },
                      "DefaultPolicy": {
                        "id": "DefaultPolicy",
                        "path": "ecs-stack/prod/TaskDef/ExecutionRole/DefaultPolicy",
                        "children": {
                          "Resource": {
                            "id": "Resource",
                            "path": "ecs-stack/prod/TaskDef/ExecutionRole/DefaultPolicy/Resource",
                            "attributes": {
                              "aws:cdk:cloudformation:type": "AWS::IAM::Policy",
                              "aws:cdk:cloudformation:props": {
                                "policyDocument": {
                                  "Statement": [
                                    {
                                      "Action": [
                                        "ecr:BatchCheckLayerAvailability",
                                        "ecr:GetDownloadUrlForLayer",
                                        "ecr:BatchGetImage"
                                      ],
                                      "Effect": "Allow",
                                      "Resource": "arn:aws:ecr:us-west-1:312093006778:repository/ecs-experiment"
                                    },
                                    {
                                      "Action": "ecr:GetAuthorizationToken",
                                      "Effect": "Allow",
                                      "Resource": "*"
                                    },
                                    {
                                      "Action": [
                                        "logs:CreateLogStream",
                                        "logs:PutLogEvents"
                                      ],
                                      "Effect": "Allow",
                                      "Resource": {
                                        "Fn::GetAtt": [
                                          "prodTaskDefWebLogGroup785DE79F",
                                          "Arn"
                                        ]
                                      }
                                    },
                                    {
                                      "Action": "secretsmanager:GetSecretValue",
                                      "Effect": "Allow",
                                      "Resource": {
                                        "Ref": "prodDBSecretAttachedSecret5F9B37C3"
                                      }
                                    }
                                  ],
                                  "Version": "2012-10-17"
                                },
                                "policyName": "prodTaskDefExecutionRoleDefaultPolicyC59EF026",
                                "roles": [
                                  {
                                    "Ref": "prodTaskDefExecutionRole257EB6D8"
                                  }
                                ]
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              },
              "repo": {
                "id": "repo",
                "path": "ecs-stack/prod/repo"
              },
              "FargateService": {
                "id": "FargateService",
                "path": "ecs-stack/prod/FargateService",
                "children": {
                  "Service": {
                    "id": "Service",
                    "path": "ecs-stack/prod/FargateService/Service",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::ECS::Service",
                      "aws:cdk:cloudformation:props": {
                        "cluster": {
                          "Ref": "prodCluster9288F49D"
                        },
                        "deploymentConfiguration": {
                          "maximumPercent": 200,
                          "minimumHealthyPercent": 50
                        },
                        "desiredCount": 2,
                        "enableEcsManagedTags": false,
                        "healthCheckGracePeriodSeconds": 60,
                        "launchType": "FARGATE",
                        "loadBalancers": [
                          {
                            "targetGroupArn": {
                              "Ref": "prodALBHTTPSListenerFargateServiceTargetGroup0990BEE5"
                            },
                            "containerName": "Web",
                            "containerPort": 5000
                          }
                        ],
                        "networkConfiguration": {
                          "awsvpcConfiguration": {
                            "assignPublicIp": "DISABLED",
                            "subnets": [
                              {
                                "Ref": "prodVPCPrivateSubnet1Subnet6794AAA7"
                              },
                              {
                                "Ref": "prodVPCPrivateSubnet2Subnet04B92CA7"
                              }
                            ],
                            "securityGroups": [
                              {
                                "Fn::GetAtt": [
                                  "prodFargateServiceSecurityGroup5FF63DF0",
                                  "GroupId"
                                ]
                              }
                            ]
                          }
                        },
                        "taskDefinition": {
                          "Ref": "prodTaskDef5D0A70F9"
                        }
                      }
                    }
                  },
                  "SecurityGroup": {
                    "id": "SecurityGroup",
                    "path": "ecs-stack/prod/FargateService/SecurityGroup",
                    "children": {
                      "Resource": {
                        "id": "Resource",
                        "path": "ecs-stack/prod/FargateService/SecurityGroup/Resource",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroup",
                          "aws:cdk:cloudformation:props": {
                            "groupDescription": "ecs-stack/prod/FargateService/SecurityGroup",
                            "securityGroupEgress": [
                              {
                                "cidrIp": "0.0.0.0/0",
                                "description": "Allow all outbound traffic by default",
                                "ipProtocol": "-1"
                              }
                            ],
                            "vpcId": {
                              "Ref": "prodVPC05D050A5"
                            }
                          }
                        }
                      },
                      "from ecsstackprodALBSecurityGroupC62EFF0E:5000": {
                        "id": "from ecsstackprodALBSecurityGroupC62EFF0E:5000",
                        "path": "ecs-stack/prod/FargateService/SecurityGroup/from ecsstackprodALBSecurityGroupC62EFF0E:5000",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroupIngress",
                          "aws:cdk:cloudformation:props": {
                            "ipProtocol": "tcp",
                            "description": "Load balancer to target",
                            "fromPort": 5000,
                            "groupId": {
                              "Fn::GetAtt": [
                                "prodFargateServiceSecurityGroup5FF63DF0",
                                "GroupId"
                              ]
                            },
                            "sourceSecurityGroupId": {
                              "Fn::GetAtt": [
                                "prodALBSecurityGroup73EC3DD1",
                                "GroupId"
                              ]
                            },
                            "toPort": 5000
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "staging": {
            "id": "staging",
            "path": "ecs-stack/staging",
            "children": {
              "VPC": {
                "id": "VPC",
                "path": "ecs-stack/staging/VPC",
                "children": {
                  "Resource": {
                    "id": "Resource",
                    "path": "ecs-stack/staging/VPC/Resource",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::VPC",
                      "aws:cdk:cloudformation:props": {
                        "cidrBlock": "10.0.0.0/21",
                        "enableDnsHostnames": true,
                        "enableDnsSupport": true,
                        "instanceTenancy": "default",
                        "tags": [
                          {
                            "key": "Name",
                            "value": "ecs-stack/staging/VPC"
                          }
                        ]
                      }
                    }
                  },
                  "PublicSubnet1": {
                    "id": "PublicSubnet1",
                    "path": "ecs-stack/staging/VPC/PublicSubnet1",
                    "children": {
                      "Subnet": {
                        "id": "Subnet",
                        "path": "ecs-stack/staging/VPC/PublicSubnet1/Subnet",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::Subnet",
                          "aws:cdk:cloudformation:props": {
                            "cidrBlock": "10.0.0.0/23",
                            "vpcId": {
                              "Ref": "stagingVPCDF88DF06"
                            },
                            "availabilityZone": {
                              "Fn::Select": [
                                0,
                                {
                                  "Fn::GetAZs": ""
                                }
                              ]
                            },
                            "mapPublicIpOnLaunch": true,
                            "tags": [
                              {
                                "key": "Name",
                                "value": "ecs-stack/staging/VPC/PublicSubnet1"
                              },
                              {
                                "key": "aws-cdk:subnet-name",
                                "value": "Public"
                              },
                              {
                                "key": "aws-cdk:subnet-type",
                                "value": "Public"
                              }
                            ]
                          }
                        }
                      },
                      "Acl": {
                        "id": "Acl",
                        "path": "ecs-stack/staging/VPC/PublicSubnet1/Acl"
                      },
                      "RouteTable": {
                        "id": "RouteTable",
                        "path": "ecs-stack/staging/VPC/PublicSubnet1/RouteTable",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::RouteTable",
                          "aws:cdk:cloudformation:props": {
                            "vpcId": {
                              "Ref": "stagingVPCDF88DF06"
                            },
                            "tags": [
                              {
                                "key": "Name",
                                "value": "ecs-stack/staging/VPC/PublicSubnet1"
                              }
                            ]
                          }
                        }
                      },
                      "RouteTableAssociation": {
                        "id": "RouteTableAssociation",
                        "path": "ecs-stack/staging/VPC/PublicSubnet1/RouteTableAssociation",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::SubnetRouteTableAssociation",
                          "aws:cdk:cloudformation:props": {
                            "routeTableId": {
                              "Ref": "stagingVPCPublicSubnet1RouteTableB733F0B7"
                            },
                            "subnetId": {
                              "Ref": "stagingVPCPublicSubnet1SubnetF096E9E2"
                            }
                          }
                        }
                      },
                      "DefaultRoute": {
                        "id": "DefaultRoute",
                        "path": "ecs-stack/staging/VPC/PublicSubnet1/DefaultRoute",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::Route",
                          "aws:cdk:cloudformation:props": {
                            "routeTableId": {
                              "Ref": "stagingVPCPublicSubnet1RouteTableB733F0B7"
                            },
                            "destinationCidrBlock": "0.0.0.0/0",
                            "gatewayId": {
                              "Ref": "stagingVPCIGW75476555"
                            }
                          }
                        }
                      },
                      "EIP": {
                        "id": "EIP",
                        "path": "ecs-stack/staging/VPC/PublicSubnet1/EIP",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::EIP",
                          "aws:cdk:cloudformation:props": {
                            "domain": "vpc",
                            "tags": [
                              {
                                "key": "Name",
                                "value": "ecs-stack/staging/VPC/PublicSubnet1"
                              }
                            ]
                          }
                        }
                      },
                      "NATGateway": {
                        "id": "NATGateway",
                        "path": "ecs-stack/staging/VPC/PublicSubnet1/NATGateway",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::NatGateway",
                          "aws:cdk:cloudformation:props": {
                            "allocationId": {
                              "Fn::GetAtt": [
                                "stagingVPCPublicSubnet1EIP7C5AD693",
                                "AllocationId"
                              ]
                            },
                            "subnetId": {
                              "Ref": "stagingVPCPublicSubnet1SubnetF096E9E2"
                            },
                            "tags": [
                              {
                                "key": "Name",
                                "value": "ecs-stack/staging/VPC/PublicSubnet1"
                              }
                            ]
                          }
                        }
                      }
                    }
                  },
                  "PublicSubnet2": {
                    "id": "PublicSubnet2",
                    "path": "ecs-stack/staging/VPC/PublicSubnet2",
                    "children": {
                      "Subnet": {
                        "id": "Subnet",
                        "path": "ecs-stack/staging/VPC/PublicSubnet2/Subnet",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::Subnet",
                          "aws:cdk:cloudformation:props": {
                            "cidrBlock": "10.0.2.0/23",
                            "vpcId": {
                              "Ref": "stagingVPCDF88DF06"
                            },
                            "availabilityZone": {
                              "Fn::Select": [
                                1,
                                {
                                  "Fn::GetAZs": ""
                                }
                              ]
                            },
                            "mapPublicIpOnLaunch": true,
                            "tags": [
                              {
                                "key": "Name",
                                "value": "ecs-stack/staging/VPC/PublicSubnet2"
                              },
                              {
                                "key": "aws-cdk:subnet-name",
                                "value": "Public"
                              },
                              {
                                "key": "aws-cdk:subnet-type",
                                "value": "Public"
                              }
                            ]
                          }
                        }
                      },
                      "Acl": {
                        "id": "Acl",
                        "path": "ecs-stack/staging/VPC/PublicSubnet2/Acl"
                      },
                      "RouteTable": {
                        "id": "RouteTable",
                        "path": "ecs-stack/staging/VPC/PublicSubnet2/RouteTable",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::RouteTable",
                          "aws:cdk:cloudformation:props": {
                            "vpcId": {
                              "Ref": "stagingVPCDF88DF06"
                            },
                            "tags": [
                              {
                                "key": "Name",
                                "value": "ecs-stack/staging/VPC/PublicSubnet2"
                              }
                            ]
                          }
                        }
                      },
                      "RouteTableAssociation": {
                        "id": "RouteTableAssociation",
                        "path": "ecs-stack/staging/VPC/PublicSubnet2/RouteTableAssociation",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::SubnetRouteTableAssociation",
                          "aws:cdk:cloudformation:props": {
                            "routeTableId": {
                              "Ref": "stagingVPCPublicSubnet2RouteTableB2CBC89F"
                            },
                            "subnetId": {
                              "Ref": "stagingVPCPublicSubnet2Subnet2271A13F"
                            }
                          }
                        }
                      },
                      "DefaultRoute": {
                        "id": "DefaultRoute",
                        "path": "ecs-stack/staging/VPC/PublicSubnet2/DefaultRoute",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::Route",
                          "aws:cdk:cloudformation:props": {
                            "routeTableId": {
                              "Ref": "stagingVPCPublicSubnet2RouteTableB2CBC89F"
                            },
                            "destinationCidrBlock": "0.0.0.0/0",
                            "gatewayId": {
                              "Ref": "stagingVPCIGW75476555"
                            }
                          }
                        }
                      },
                      "EIP": {
                        "id": "EIP",
                        "path": "ecs-stack/staging/VPC/PublicSubnet2/EIP",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::EIP",
                          "aws:cdk:cloudformation:props": {
                            "domain": "vpc",
                            "tags": [
                              {
                                "key": "Name",
                                "value": "ecs-stack/staging/VPC/PublicSubnet2"
                              }
                            ]
                          }
                        }
                      },
                      "NATGateway": {
                        "id": "NATGateway",
                        "path": "ecs-stack/staging/VPC/PublicSubnet2/NATGateway",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::NatGateway",
                          "aws:cdk:cloudformation:props": {
                            "allocationId": {
                              "Fn::GetAtt": [
                                "stagingVPCPublicSubnet2EIP4DD6B429",
                                "AllocationId"
                              ]
                            },
                            "subnetId": {
                              "Ref": "stagingVPCPublicSubnet2Subnet2271A13F"
                            },
                            "tags": [
                              {
                                "key": "Name",
                                "value": "ecs-stack/staging/VPC/PublicSubnet2"
                              }
                            ]
                          }
                        }
                      }
                    }
                  },
                  "PrivateSubnet1": {
                    "id": "PrivateSubnet1",
                    "path": "ecs-stack/staging/VPC/PrivateSubnet1",
                    "children": {
                      "Subnet": {
                        "id": "Subnet",
                        "path": "ecs-stack/staging/VPC/PrivateSubnet1/Subnet",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::Subnet",
                          "aws:cdk:cloudformation:props": {
                            "cidrBlock": "10.0.4.0/23",
                            "vpcId": {
                              "Ref": "stagingVPCDF88DF06"
                            },
                            "availabilityZone": {
                              "Fn::Select": [
                                0,
                                {
                                  "Fn::GetAZs": ""
                                }
                              ]
                            },
                            "mapPublicIpOnLaunch": false,
                            "tags": [
                              {
                                "key": "Name",
                                "value": "ecs-stack/staging/VPC/PrivateSubnet1"
                              },
                              {
                                "key": "aws-cdk:subnet-name",
                                "value": "Private"
                              },
                              {
                                "key": "aws-cdk:subnet-type",
                                "value": "Private"
                              }
                            ]
                          }
                        }
                      },
                      "Acl": {
                        "id": "Acl",
                        "path": "ecs-stack/staging/VPC/PrivateSubnet1/Acl"
                      },
                      "RouteTable": {
                        "id": "RouteTable",
                        "path": "ecs-stack/staging/VPC/PrivateSubnet1/RouteTable",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::RouteTable",
                          "aws:cdk:cloudformation:props": {
                            "vpcId": {
                              "Ref": "stagingVPCDF88DF06"
                            },
                            "tags": [
                              {
                                "key": "Name",
                                "value": "ecs-stack/staging/VPC/PrivateSubnet1"
                              }
                            ]
                          }
                        }
                      },
                      "RouteTableAssociation": {
                        "id": "RouteTableAssociation",
                        "path": "ecs-stack/staging/VPC/PrivateSubnet1/RouteTableAssociation",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::SubnetRouteTableAssociation",
                          "aws:cdk:cloudformation:props": {
                            "routeTableId": {
                              "Ref": "stagingVPCPrivateSubnet1RouteTableA65B6A8F"
                            },
                            "subnetId": {
                              "Ref": "stagingVPCPrivateSubnet1SubnetA5864E19"
                            }
                          }
                        }
                      },
                      "DefaultRoute": {
                        "id": "DefaultRoute",
                        "path": "ecs-stack/staging/VPC/PrivateSubnet1/DefaultRoute",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::Route",
                          "aws:cdk:cloudformation:props": {
                            "routeTableId": {
                              "Ref": "stagingVPCPrivateSubnet1RouteTableA65B6A8F"
                            },
                            "destinationCidrBlock": "0.0.0.0/0",
                            "natGatewayId": {
                              "Ref": "stagingVPCPublicSubnet1NATGateway36438E83"
                            }
                          }
                        }
                      }
                    }
                  },
                  "PrivateSubnet2": {
                    "id": "PrivateSubnet2",
                    "path": "ecs-stack/staging/VPC/PrivateSubnet2",
                    "children": {
                      "Subnet": {
                        "id": "Subnet",
                        "path": "ecs-stack/staging/VPC/PrivateSubnet2/Subnet",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::Subnet",
                          "aws:cdk:cloudformation:props": {
                            "cidrBlock": "10.0.6.0/23",
                            "vpcId": {
                              "Ref": "stagingVPCDF88DF06"
                            },
                            "availabilityZone": {
                              "Fn::Select": [
                                1,
                                {
                                  "Fn::GetAZs": ""
                                }
                              ]
                            },
                            "mapPublicIpOnLaunch": false,
                            "tags": [
                              {
                                "key": "Name",
                                "value": "ecs-stack/staging/VPC/PrivateSubnet2"
                              },
                              {
                                "key": "aws-cdk:subnet-name",
                                "value": "Private"
                              },
                              {
                                "key": "aws-cdk:subnet-type",
                                "value": "Private"
                              }
                            ]
                          }
                        }
                      },
                      "Acl": {
                        "id": "Acl",
                        "path": "ecs-stack/staging/VPC/PrivateSubnet2/Acl"
                      },
                      "RouteTable": {
                        "id": "RouteTable",
                        "path": "ecs-stack/staging/VPC/PrivateSubnet2/RouteTable",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::RouteTable",
                          "aws:cdk:cloudformation:props": {
                            "vpcId": {
                              "Ref": "stagingVPCDF88DF06"
                            },
                            "tags": [
                              {
                                "key": "Name",
                                "value": "ecs-stack/staging/VPC/PrivateSubnet2"
                              }
                            ]
                          }
                        }
                      },
                      "RouteTableAssociation": {
                        "id": "RouteTableAssociation",
                        "path": "ecs-stack/staging/VPC/PrivateSubnet2/RouteTableAssociation",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::SubnetRouteTableAssociation",
                          "aws:cdk:cloudformation:props": {
                            "routeTableId": {
                              "Ref": "stagingVPCPrivateSubnet2RouteTableEDFA1ED2"
                            },
                            "subnetId": {
                              "Ref": "stagingVPCPrivateSubnet2Subnet3EF81AA2"
                            }
                          }
                        }
                      },
                      "DefaultRoute": {
                        "id": "DefaultRoute",
                        "path": "ecs-stack/staging/VPC/PrivateSubnet2/DefaultRoute",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::Route",
                          "aws:cdk:cloudformation:props": {
                            "routeTableId": {
                              "Ref": "stagingVPCPrivateSubnet2RouteTableEDFA1ED2"
                            },
                            "destinationCidrBlock": "0.0.0.0/0",
                            "natGatewayId": {
                              "Ref": "stagingVPCPublicSubnet2NATGateway8470BC2E"
                            }
                          }
                        }
                      }
                    }
                  },
                  "IGW": {
                    "id": "IGW",
                    "path": "ecs-stack/staging/VPC/IGW",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::InternetGateway",
                      "aws:cdk:cloudformation:props": {
                        "tags": [
                          {
                            "key": "Name",
                            "value": "ecs-stack/staging/VPC"
                          }
                        ]
                      }
                    }
                  },
                  "VPCGW": {
                    "id": "VPCGW",
                    "path": "ecs-stack/staging/VPC/VPCGW",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::EC2::VPCGatewayAttachment",
                      "aws:cdk:cloudformation:props": {
                        "vpcId": {
                          "Ref": "stagingVPCDF88DF06"
                        },
                        "internetGatewayId": {
                          "Ref": "stagingVPCIGW75476555"
                        }
                      }
                    }
                  }
                }
              },
              "ALB": {
                "id": "ALB",
                "path": "ecs-stack/staging/ALB",
                "children": {
                  "Resource": {
                    "id": "Resource",
                    "path": "ecs-stack/staging/ALB/Resource",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::ElasticLoadBalancingV2::LoadBalancer",
                      "aws:cdk:cloudformation:props": {
                        "scheme": "internet-facing",
                        "securityGroups": [
                          {
                            "Fn::GetAtt": [
                              "stagingALBSecurityGroup920BDA99",
                              "GroupId"
                            ]
                          }
                        ],
                        "subnets": [
                          {
                            "Ref": "stagingVPCPublicSubnet1SubnetF096E9E2"
                          },
                          {
                            "Ref": "stagingVPCPublicSubnet2Subnet2271A13F"
                          }
                        ],
                        "type": "application"
                      }
                    }
                  },
                  "SecurityGroup": {
                    "id": "SecurityGroup",
                    "path": "ecs-stack/staging/ALB/SecurityGroup",
                    "children": {
                      "Resource": {
                        "id": "Resource",
                        "path": "ecs-stack/staging/ALB/SecurityGroup/Resource",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroup",
                          "aws:cdk:cloudformation:props": {
                            "groupDescription": "Automatically created Security Group for ELB ecsstackstagingALB8C878BB8",
                            "securityGroupIngress": [
                              {
                                "cidrIp": "0.0.0.0/0",
                                "ipProtocol": "tcp",
                                "fromPort": 80,
                                "toPort": 80,
                                "description": "Allow from anyone on port 80"
                              },
                              {
                                "cidrIp": "0.0.0.0/0",
                                "ipProtocol": "tcp",
                                "fromPort": 443,
                                "toPort": 443,
                                "description": "Allow from anyone on port 443"
                              }
                            ],
                            "vpcId": {
                              "Ref": "stagingVPCDF88DF06"
                            }
                          }
                        }
                      },
                      "to ecsstackstagingFargateServiceSecurityGroup8A4EBEFA:5000": {
                        "id": "to ecsstackstagingFargateServiceSecurityGroup8A4EBEFA:5000",
                        "path": "ecs-stack/staging/ALB/SecurityGroup/to ecsstackstagingFargateServiceSecurityGroup8A4EBEFA:5000",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroupEgress",
                          "aws:cdk:cloudformation:props": {
                            "groupId": {
                              "Fn::GetAtt": [
                                "stagingALBSecurityGroup920BDA99",
                                "GroupId"
                              ]
                            },
                            "ipProtocol": "tcp",
                            "description": "Load balancer to target",
                            "destinationSecurityGroupId": {
                              "Fn::GetAtt": [
                                "stagingFargateServiceSecurityGroupE0F79EF2",
                                "GroupId"
                              ]
                            },
                            "fromPort": 5000,
                            "toPort": 5000
                          }
                        }
                      }
                    }
                  },
                  "HTTPListener": {
                    "id": "HTTPListener",
                    "path": "ecs-stack/staging/ALB/HTTPListener",
                    "children": {
                      "Resource": {
                        "id": "Resource",
                        "path": "ecs-stack/staging/ALB/HTTPListener/Resource",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::ElasticLoadBalancingV2::Listener",
                          "aws:cdk:cloudformation:props": {
                            "defaultActions": [
                              {
                                "redirectConfig": {
                                  "protocol": "HTTPS",
                                  "statusCode": "HTTP_301"
                                },
                                "type": "redirect"
                              }
                            ],
                            "loadBalancerArn": {
                              "Ref": "stagingALB210AED05"
                            },
                            "port": 80,
                            "protocol": "HTTP"
                          }
                        }
                      }
                    }
                  },
                  "HTTPSListener": {
                    "id": "HTTPSListener",
                    "path": "ecs-stack/staging/ALB/HTTPSListener",
                    "children": {
                      "Resource": {
                        "id": "Resource",
                        "path": "ecs-stack/staging/ALB/HTTPSListener/Resource",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::ElasticLoadBalancingV2::Listener",
                          "aws:cdk:cloudformation:props": {
                            "defaultActions": [
                              {
                                "targetGroupArn": {
                                  "Ref": "stagingALBHTTPSListenerFargateServiceTargetGroupF5B8FB86"
                                },
                                "type": "forward"
                              }
                            ],
                            "loadBalancerArn": {
                              "Ref": "stagingALB210AED05"
                            },
                            "port": 443,
                            "protocol": "HTTPS",
                            "certificates": [
                              {
                                "certificateArn": "arn:aws:acm:us-west-1:312093006778:certificate/e00b73a0-f919-4ea0-a2d8-81f985331665"
                              }
                            ]
                          }
                        }
                      },
                      "FargateServiceTargetGroup": {
                        "id": "FargateServiceTargetGroup",
                        "path": "ecs-stack/staging/ALB/HTTPSListener/FargateServiceTargetGroup",
                        "children": {
                          "Resource": {
                            "id": "Resource",
                            "path": "ecs-stack/staging/ALB/HTTPSListener/FargateServiceTargetGroup/Resource",
                            "attributes": {
                              "aws:cdk:cloudformation:type": "AWS::ElasticLoadBalancingV2::TargetGroup",
                              "aws:cdk:cloudformation:props": {
                                "port": 5000,
                                "protocol": "HTTP",
                                "targetType": "ip",
                                "vpcId": {
                                  "Ref": "stagingVPCDF88DF06"
                                }
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              },
              "DB": {
                "id": "DB",
                "path": "ecs-stack/staging/DB",
                "children": {
                  "SubnetGroup": {
                    "id": "SubnetGroup",
                    "path": "ecs-stack/staging/DB/SubnetGroup",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::RDS::DBSubnetGroup",
                      "aws:cdk:cloudformation:props": {
                        "dbSubnetGroupDescription": "Subnet group for DB database",
                        "subnetIds": [
                          {
                            "Ref": "stagingVPCPrivateSubnet1SubnetA5864E19"
                          },
                          {
                            "Ref": "stagingVPCPrivateSubnet2Subnet3EF81AA2"
                          }
                        ]
                      }
                    }
                  },
                  "SecurityGroup": {
                    "id": "SecurityGroup",
                    "path": "ecs-stack/staging/DB/SecurityGroup",
                    "children": {
                      "Resource": {
                        "id": "Resource",
                        "path": "ecs-stack/staging/DB/SecurityGroup/Resource",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroup",
                          "aws:cdk:cloudformation:props": {
                            "groupDescription": "Security group for DB database",
                            "securityGroupEgress": [
                              {
                                "cidrIp": "0.0.0.0/0",
                                "description": "Allow all outbound traffic by default",
                                "ipProtocol": "-1"
                              }
                            ],
                            "vpcId": {
                              "Ref": "stagingVPCDF88DF06"
                            }
                          }
                        }
                      },
                      "from ecsstackstagingFargateServiceSecurityGroup8A4EBEFA:{IndirectPort}": {
                        "id": "from ecsstackstagingFargateServiceSecurityGroup8A4EBEFA:{IndirectPort}",
                        "path": "ecs-stack/staging/DB/SecurityGroup/from ecsstackstagingFargateServiceSecurityGroup8A4EBEFA:{IndirectPort}",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroupIngress",
                          "aws:cdk:cloudformation:props": {
                            "ipProtocol": "tcp",
                            "description": "from ecsstackstagingFargateServiceSecurityGroup8A4EBEFA:{IndirectPort}",
                            "fromPort": {
                              "Fn::GetAtt": [
                                "stagingDBF99FC939",
                                "Endpoint.Port"
                              ]
                            },
                            "groupId": {
                              "Fn::GetAtt": [
                                "stagingDBSecurityGroupEB1F3248",
                                "GroupId"
                              ]
                            },
                            "sourceSecurityGroupId": {
                              "Fn::GetAtt": [
                                "stagingFargateServiceSecurityGroupE0F79EF2",
                                "GroupId"
                              ]
                            },
                            "toPort": {
                              "Fn::GetAtt": [
                                "stagingDBF99FC939",
                                "Endpoint.Port"
                              ]
                            }
                          }
                        }
                      }
                    }
                  },
                  "Secret": {
                    "id": "Secret",
                    "path": "ecs-stack/staging/DB/Secret",
                    "children": {
                      "Resource": {
                        "id": "Resource",
                        "path": "ecs-stack/staging/DB/Secret/Resource",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::SecretsManager::Secret",
                          "aws:cdk:cloudformation:props": {
                            "generateSecretString": {
                              "passwordLength": 30,
                              "secretStringTemplate": "{\"username\":\"postgres\"}",
                              "generateStringKey": "password",
                              "excludeCharacters": "\"@/\\"
                            }
                          }
                        }
                      },
                      "AttachedSecret": {
                        "id": "AttachedSecret",
                        "path": "ecs-stack/staging/DB/Secret/AttachedSecret",
                        "children": {
                          "Resource": {
                            "id": "Resource",
                            "path": "ecs-stack/staging/DB/Secret/AttachedSecret/Resource",
                            "attributes": {
                              "aws:cdk:cloudformation:type": "AWS::SecretsManager::SecretTargetAttachment",
                              "aws:cdk:cloudformation:props": {
                                "secretId": {
                                  "Ref": "stagingDBSecretF8227C4F"
                                },
                                "targetId": {
                                  "Ref": "stagingDBF99FC939"
                                },
                                "targetType": "AWS::RDS::DBInstance"
                              }
                            }
                          }
                        }
                      }
                    }
                  },
                  "Resource": {
                    "id": "Resource",
                    "path": "ecs-stack/staging/DB/Resource",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::RDS::DBInstance",
                      "aws:cdk:cloudformation:props": {
                        "dbInstanceClass": "db.t2.small",
                        "allocatedStorage": "100",
                        "copyTagsToSnapshot": true,
                        "dbSubnetGroupName": {
                          "Ref": "stagingDBSubnetGroup126B98C2"
                        },
                        "deletionProtection": true,
                        "engine": "postgres",
                        "masterUsername": {
                          "Fn::Join": [
                            "",
                            [
                              "{{resolve:secretsmanager:",
                              {
                                "Ref": "stagingDBSecretF8227C4F"
                              },
                              ":SecretString:username::}}"
                            ]
                          ]
                        },
                        "masterUserPassword": {
                          "Fn::Join": [
                            "",
                            [
                              "{{resolve:secretsmanager:",
                              {
                                "Ref": "stagingDBSecretF8227C4F"
                              },
                              ":SecretString:password::}}"
                            ]
                          ]
                        },
                        "storageType": "gp2",
                        "vpcSecurityGroups": [
                          {
                            "Fn::GetAtt": [
                              "stagingDBSecurityGroupEB1F3248",
                              "GroupId"
                            ]
                          }
                        ]
                      }
                    }
                  }
                }
              },
              "Cluster": {
                "id": "Cluster",
                "path": "ecs-stack/staging/Cluster",
                "children": {
                  "Resource": {
                    "id": "Resource",
                    "path": "ecs-stack/staging/Cluster/Resource",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::ECS::Cluster",
                      "aws:cdk:cloudformation:props": {}
                    }
                  }
                }
              },
              "TaskDef": {
                "id": "TaskDef",
                "path": "ecs-stack/staging/TaskDef",
                "children": {
                  "TaskRole": {
                    "id": "TaskRole",
                    "path": "ecs-stack/staging/TaskDef/TaskRole",
                    "children": {
                      "Resource": {
                        "id": "Resource",
                        "path": "ecs-stack/staging/TaskDef/TaskRole/Resource",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::IAM::Role",
                          "aws:cdk:cloudformation:props": {
                            "assumeRolePolicyDocument": {
                              "Statement": [
                                {
                                  "Action": "sts:AssumeRole",
                                  "Effect": "Allow",
                                  "Principal": {
                                    "Service": "ecs-tasks.amazonaws.com"
                                  }
                                }
                              ],
                              "Version": "2012-10-17"
                            }
                          }
                        }
                      }
                    }
                  },
                  "Resource": {
                    "id": "Resource",
                    "path": "ecs-stack/staging/TaskDef/Resource",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::ECS::TaskDefinition",
                      "aws:cdk:cloudformation:props": {
                        "containerDefinitions": [
                          {
                            "essential": true,
                            "image": {
                              "Fn::Join": [
                                "",
                                [
                                  "312093006778.dkr.ecr.us-west-1.",
                                  {
                                    "Ref": "AWS::URLSuffix"
                                  },
                                  "/ecs-experiment:latest"
                                ]
                              ]
                            },
                            "name": "Web",
                            "portMappings": [
                              {
                                "containerPort": 5000,
                                "protocol": "tcp"
                              }
                            ],
                            "logConfiguration": {
                              "logDriver": "awslogs",
                              "options": {
                                "awslogs-group": {
                                  "Ref": "stagingTaskDefWebLogGroup197B9372"
                                },
                                "awslogs-stream-prefix": "staging-ECSCluster",
                                "awslogs-region": {
                                  "Ref": "AWS::Region"
                                }
                              }
                            },
                            "environment": [
                              {
                                "name": "STAGE",
                                "value": "staging"
                              },
                              {
                                "name": "DATABASE_URL",
                                "value": {
                                  "Fn::Join": [
                                    "",
                                    [
                                      {
                                        "Fn::GetAtt": [
                                          "stagingDBF99FC939",
                                          "Endpoint.Address"
                                        ]
                                      },
                                      ":",
                                      {
                                        "Fn::GetAtt": [
                                          "stagingDBF99FC939",
                                          "Endpoint.Port"
                                        ]
                                      }
                                    ]
                                  ]
                                }
                              },
                              {
                                "name": "DATABASE_USERNAME",
                                "value": "postgres"
                              }
                            ],
                            "secrets": [
                              {
                                "name": "DATABASE_PASSWORD",
                                "valueFrom": {
                                  "Ref": "stagingDBSecretAttachedSecret80A24E75"
                                }
                              }
                            ]
                          }
                        ],
                        "cpu": "256",
                        "executionRoleArn": {
                          "Fn::GetAtt": [
                            "stagingTaskDefExecutionRole7F495404",
                            "Arn"
                          ]
                        },
                        "family": "ecsstackstagingTaskDef0B7D9DFC",
                        "memory": "512",
                        "networkMode": "awsvpc",
                        "requiresCompatibilities": [
                          "FARGATE"
                        ],
                        "taskRoleArn": {
                          "Fn::GetAtt": [
                            "stagingTaskDefTaskRole110AF896",
                            "Arn"
                          ]
                        }
                      }
                    }
                  },
                  "Web": {
                    "id": "Web",
                    "path": "ecs-stack/staging/TaskDef/Web",
                    "children": {
                      "LogGroup": {
                        "id": "LogGroup",
                        "path": "ecs-stack/staging/TaskDef/Web/LogGroup",
                        "children": {
                          "Resource": {
                            "id": "Resource",
                            "path": "ecs-stack/staging/TaskDef/Web/LogGroup/Resource",
                            "attributes": {
                              "aws:cdk:cloudformation:type": "AWS::Logs::LogGroup",
                              "aws:cdk:cloudformation:props": {}
                            }
                          }
                        }
                      }
                    }
                  },
                  "ExecutionRole": {
                    "id": "ExecutionRole",
                    "path": "ecs-stack/staging/TaskDef/ExecutionRole",
                    "children": {
                      "Resource": {
                        "id": "Resource",
                        "path": "ecs-stack/staging/TaskDef/ExecutionRole/Resource",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::IAM::Role",
                          "aws:cdk:cloudformation:props": {
                            "assumeRolePolicyDocument": {
                              "Statement": [
                                {
                                  "Action": "sts:AssumeRole",
                                  "Effect": "Allow",
                                  "Principal": {
                                    "Service": "ecs-tasks.amazonaws.com"
                                  }
                                }
                              ],
                              "Version": "2012-10-17"
                            }
                          }
                        }
                      },
                      "DefaultPolicy": {
                        "id": "DefaultPolicy",
                        "path": "ecs-stack/staging/TaskDef/ExecutionRole/DefaultPolicy",
                        "children": {
                          "Resource": {
                            "id": "Resource",
                            "path": "ecs-stack/staging/TaskDef/ExecutionRole/DefaultPolicy/Resource",
                            "attributes": {
                              "aws:cdk:cloudformation:type": "AWS::IAM::Policy",
                              "aws:cdk:cloudformation:props": {
                                "policyDocument": {
                                  "Statement": [
                                    {
                                      "Action": [
                                        "ecr:BatchCheckLayerAvailability",
                                        "ecr:GetDownloadUrlForLayer",
                                        "ecr:BatchGetImage"
                                      ],
                                      "Effect": "Allow",
                                      "Resource": "arn:aws:ecr:us-west-1:312093006778:repository/ecs-experiment"
                                    },
                                    {
                                      "Action": "ecr:GetAuthorizationToken",
                                      "Effect": "Allow",
                                      "Resource": "*"
                                    },
                                    {
                                      "Action": [
                                        "logs:CreateLogStream",
                                        "logs:PutLogEvents"
                                      ],
                                      "Effect": "Allow",
                                      "Resource": {
                                        "Fn::GetAtt": [
                                          "stagingTaskDefWebLogGroup197B9372",
                                          "Arn"
                                        ]
                                      }
                                    },
                                    {
                                      "Action": "secretsmanager:GetSecretValue",
                                      "Effect": "Allow",
                                      "Resource": {
                                        "Ref": "stagingDBSecretAttachedSecret80A24E75"
                                      }
                                    }
                                  ],
                                  "Version": "2012-10-17"
                                },
                                "policyName": "stagingTaskDefExecutionRoleDefaultPolicy9C29B924",
                                "roles": [
                                  {
                                    "Ref": "stagingTaskDefExecutionRole7F495404"
                                  }
                                ]
                              }
                            }
                          }
                        }
                      }
                    }
                  }
                }
              },
              "repo": {
                "id": "repo",
                "path": "ecs-stack/staging/repo"
              },
              "FargateService": {
                "id": "FargateService",
                "path": "ecs-stack/staging/FargateService",
                "children": {
                  "Service": {
                    "id": "Service",
                    "path": "ecs-stack/staging/FargateService/Service",
                    "attributes": {
                      "aws:cdk:cloudformation:type": "AWS::ECS::Service",
                      "aws:cdk:cloudformation:props": {
                        "cluster": {
                          "Ref": "stagingCluster0E743F35"
                        },
                        "deploymentConfiguration": {
                          "maximumPercent": 200,
                          "minimumHealthyPercent": 50
                        },
                        "desiredCount": 2,
                        "enableEcsManagedTags": false,
                        "healthCheckGracePeriodSeconds": 60,
                        "launchType": "FARGATE",
                        "loadBalancers": [
                          {
                            "targetGroupArn": {
                              "Ref": "stagingALBHTTPSListenerFargateServiceTargetGroupF5B8FB86"
                            },
                            "containerName": "Web",
                            "containerPort": 5000
                          }
                        ],
                        "networkConfiguration": {
                          "awsvpcConfiguration": {
                            "assignPublicIp": "DISABLED",
                            "subnets": [
                              {
                                "Ref": "stagingVPCPrivateSubnet1SubnetA5864E19"
                              },
                              {
                                "Ref": "stagingVPCPrivateSubnet2Subnet3EF81AA2"
                              }
                            ],
                            "securityGroups": [
                              {
                                "Fn::GetAtt": [
                                  "stagingFargateServiceSecurityGroupE0F79EF2",
                                  "GroupId"
                                ]
                              }
                            ]
                          }
                        },
                        "taskDefinition": {
                          "Ref": "stagingTaskDefA314A7BB"
                        }
                      }
                    }
                  },
                  "SecurityGroup": {
                    "id": "SecurityGroup",
                    "path": "ecs-stack/staging/FargateService/SecurityGroup",
                    "children": {
                      "Resource": {
                        "id": "Resource",
                        "path": "ecs-stack/staging/FargateService/SecurityGroup/Resource",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroup",
                          "aws:cdk:cloudformation:props": {
                            "groupDescription": "ecs-stack/staging/FargateService/SecurityGroup",
                            "securityGroupEgress": [
                              {
                                "cidrIp": "0.0.0.0/0",
                                "description": "Allow all outbound traffic by default",
                                "ipProtocol": "-1"
                              }
                            ],
                            "vpcId": {
                              "Ref": "stagingVPCDF88DF06"
                            }
                          }
                        }
                      },
                      "from ecsstackstagingALBSecurityGroup30C4035D:5000": {
                        "id": "from ecsstackstagingALBSecurityGroup30C4035D:5000",
                        "path": "ecs-stack/staging/FargateService/SecurityGroup/from ecsstackstagingALBSecurityGroup30C4035D:5000",
                        "attributes": {
                          "aws:cdk:cloudformation:type": "AWS::EC2::SecurityGroupIngress",
                          "aws:cdk:cloudformation:props": {
                            "ipProtocol": "tcp",
                            "description": "Load balancer to target",
                            "fromPort": 5000,
                            "groupId": {
                              "Fn::GetAtt": [
                                "stagingFargateServiceSecurityGroupE0F79EF2",
                                "GroupId"
                              ]
                            },
                            "sourceSecurityGroupId": {
                              "Fn::GetAtt": [
                                "stagingALBSecurityGroup920BDA99",
                                "GroupId"
                              ]
                            },
                            "toPort": 5000
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          },
          "build": {
            "id": "build",
            "path": "ecs-stack/build"
          }
        }
      }
    }
  }
}